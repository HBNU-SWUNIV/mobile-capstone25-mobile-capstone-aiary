{
  "openapi": "3.0.1",
  "info": {
    "title": "OpenAPI definition",
    "version": "v0"
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "Generated server url"
    }
  ],
  "tags": [
    {
      "name": "Chat Message",
      "description": "채팅 메시지 관리 API"
    },
    {
      "name": "Chat Thread",
      "description": "채팅 스레드 관리 API"
    },
    {
      "name": "OpenAI Test",
      "description": "OpenAI 통합 테스트 API"
    },
    {
      "name": "Diary",
      "description": "일기 관리 API"
    }
  ],
  "paths": {
    "/diaries": {
      "get": {
        "tags": [
          "Diary"
        ],
        "summary": "일기 목록 조회",
        "description": "특정 스레드의 일기 목록을 페이지네이션으로 조회합니다",
        "operationId": "list",
        "parameters": [
          {
            "name": "threadId",
            "in": "query",
            "description": "스레드 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "조회할 항목 수 (최대 100)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            },
            "example": 20
          },
          {
            "name": "cursor",
            "in": "query",
            "description": "페이지네이션 커서 (이전 응답의 nextCursor 값)",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "일기 목록 조회 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Diary"
        ],
        "summary": "일기 생성",
        "description": "스레드의 메시지를 기반으로 일기를 생성합니다",
        "operationId": "create",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDiaryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "스레드를 찾을 수 없음",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "200": {
            "description": "일기 생성 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/threads": {
      "get": {
        "tags": [
          "Chat Thread"
        ],
        "summary": "스레드 목록 조회",
        "description": "상태별 스레드 목록을 페이지네이션으로 조회합니다",
        "operationId": "list_1",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "description": "스레드 상태 (active/archived)",
            "required": false,
            "schema": {
              "type": "string",
              "default": "active"
            },
            "example": "active"
          },
          {
            "name": "limit",
            "in": "query",
            "description": "조회할 항목 수 (최대 100)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            },
            "example": 20
          },
          {
            "name": "cursor",
            "in": "query",
            "description": "페이지네이션 커서 (이전 응답의 nextCursor 값)",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "스레드 목록 조회 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Chat Thread"
        ],
        "summary": "스레드 생성",
        "description": "새로운 채팅 스레드를 생성합니다",
        "operationId": "create_1",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateThreadRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "스레드 생성 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/chat/messages": {
      "post": {
        "tags": [
          "Chat Message"
        ],
        "summary": "사용자 메시지 전송",
        "description": "스레드에 사용자 메시지를 추가합니다",
        "operationId": "postMessage",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendMessageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "스레드를 찾을 수 없음",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "409": {
            "description": "스레드가 finalized 상태",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "200": {
            "description": "메시지 전송 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/validate": {
      "post": {
        "tags": [
          "auth-controller"
        ],
        "operationId": "validateAccessToken",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": {
                  "type": "string"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/auth/sign-up": {
      "post": {
        "tags": [
          "auth-controller"
        ],
        "operationId": "signUp",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignUpRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "auth-controller"
        ],
        "operationId": "login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          }
        }
      }
    },
    "/auth/extend": {
      "post": {
        "tags": [
          "auth-controller"
        ],
        "operationId": "extendAccessToken",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/api/openai-test/diary": {
      "post": {
        "tags": [
          "OpenAI Test"
        ],
        "summary": "일기 생성 테스트",
        "description": "메시지 컨텍스트를 기반으로 OpenAI를 사용하여 일기를 생성합니다",
        "operationId": "generateDiary",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiaryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "500": {
            "description": "일기 생성 실패",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "200": {
            "description": "일기 생성 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/chat/threads/{threadId}": {
      "get": {
        "tags": [
          "Chat Thread"
        ],
        "summary": "스레드 조회",
        "description": "특정 스레드의 상세 정보를 조회합니다",
        "operationId": "get_1",
        "parameters": [
          {
            "name": "threadId",
            "in": "path",
            "description": "스레드 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "스레드를 찾을 수 없음",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ChatThread"
                }
              }
            }
          },
          "200": {
            "description": "스레드 조회 성공",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ChatThread"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Chat Thread"
        ],
        "summary": "스레드 삭제",
        "description": "특정 스레드를 삭제합니다",
        "operationId": "delete",
        "parameters": [
          {
            "name": "threadId",
            "in": "path",
            "description": "스레드 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "스레드를 찾을 수 없음",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "204": {
            "description": "스레드 삭제 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Chat Thread"
        ],
        "summary": "스레드 상태 변경",
        "description": "스레드의 상태를 변경합니다 (active/archived)",
        "operationId": "updateStatus",
        "parameters": [
          {
            "name": "threadId",
            "in": "path",
            "description": "스레드 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateStatusRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "상태 변경 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "스레드를 찾을 수 없음",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/chat/messages/{messageId}": {
      "delete": {
        "tags": [
          "Chat Message"
        ],
        "summary": "메시지 삭제",
        "description": "특정 메시지를 삭제합니다",
        "operationId": "deleteMessage",
        "parameters": [
          {
            "name": "messageId",
            "in": "path",
            "description": "메시지 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "메시지 삭제 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "메시지를 찾을 수 없음",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "409": {
            "description": "스레드가 finalized 상태",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Chat Message"
        ],
        "summary": "메시지 수정",
        "description": "특정 메시지의 내용을 수정합니다",
        "operationId": "patchMessage",
        "parameters": [
          {
            "name": "messageId",
            "in": "path",
            "description": "메시지 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": {
                  "type": "string"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "메시지를 찾을 수 없음",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "409": {
            "description": "스레드가 finalized 상태",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "200": {
            "description": "메시지 수정 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/threads/{threadId}/messages": {
      "get": {
        "tags": [
          "Chat Message"
        ],
        "summary": "메시지 목록 조회",
        "description": "특정 스레드의 메시지 목록을 페이지네이션으로 조회합니다",
        "operationId": "listMessages",
        "parameters": [
          {
            "name": "threadId",
            "in": "path",
            "description": "스레드 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "조회할 항목 수 (최대 100)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 50
            },
            "example": 50
          },
          {
            "name": "cursor",
            "in": "query",
            "description": "페이지네이션 커서 (이전 응답의 nextCursor 값)",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "메시지 목록 조회 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/diaries/{diaryId}": {
      "get": {
        "tags": [
          "Diary"
        ],
        "summary": "일기 조회",
        "description": "특정 일기의 상세 정보를 조회합니다",
        "operationId": "get",
        "parameters": [
          {
            "name": "diaryId",
            "in": "path",
            "description": "일기 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "일기 조회 성공",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Diary"
                }
              }
            }
          },
          "404": {
            "description": "일기를 찾을 수 없음",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Diary"
                }
              }
            }
          }
        }
      }
    },
    "/chat/stream": {
      "get": {
        "tags": [
          "Chat Message"
        ],
        "summary": "AI 응답 스트리밍",
        "description": "스레드의 메시지를 기반으로 AI 응답을 실시간 스트리밍합니다",
        "operationId": "stream",
        "parameters": [
          {
            "name": "threadId",
            "in": "query",
            "description": "스레드 ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "스레드를 찾을 수 없음",
            "content": {
              "text/event-stream": {
                "schema": {
                  "$ref": "#/components/schemas/SseEmitter"
                }
              }
            }
          },
          "409": {
            "description": "스레드가 finalized 상태",
            "content": {
              "text/event-stream": {
                "schema": {
                  "$ref": "#/components/schemas/SseEmitter"
                }
              }
            }
          },
          "200": {
            "description": "스트리밍 시작 성공",
            "content": {
              "text/event-stream": {}
            }
          }
        }
      }
    },
    "/api/openai-test/stream": {
      "get": {
        "tags": [
          "OpenAI Test"
        ],
        "summary": "스트리밍 채팅 테스트",
        "description": "OpenAI를 사용하여 실시간 스트리밍 채팅 응답을 반환합니다",
        "operationId": "streamChat",
        "parameters": [
          {
            "name": "message",
            "in": "query",
            "description": "사용자 메시지",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "스트리밍 시작 성공",
            "content": {
              "text/event-stream": {}
            }
          }
        }
      }
    },
    "/api/openai-test/health": {
      "get": {
        "tags": [
          "OpenAI Test"
        ],
        "summary": "건강 체크",
        "description": "OpenAI 클라이언트 설정 상태를 확인합니다",
        "operationId": "health",
        "responses": {
          "200": {
            "description": "건강 체크 성공",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CreateDiaryRequest": {
        "type": "object",
        "properties": {
          "threadId": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "mood": {
            "type": "string"
          }
        }
      },
      "CreateThreadRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          }
        }
      },
      "SendMessageRequest": {
        "type": "object",
        "properties": {
          "threadId": {
            "type": "string",
            "format": "uuid"
          },
          "content": {
            "type": "string"
          }
        }
      },
      "SignUpRequest": {
        "type": "object",
        "properties": {
          "password": {
            "type": "string"
          },
          "nickname": {
            "type": "string"
          },
          "user_name": {
            "type": "string"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "password": {
            "type": "string"
          },
          "user_name": {
            "type": "string"
          }
        }
      },
      "TokenResponse": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string"
          },
          "refreshToken": {
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/UserDto"
          }
        }
      },
      "UserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "nickname": {
            "type": "string"
          },
          "user_name": {
            "type": "string"
          }
        }
      },
      "DiaryRequest": {
        "type": "object",
        "properties": {
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MessageDto"
            }
          }
        }
      },
      "MessageDto": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string"
          },
          "content": {
            "type": "string"
          }
        }
      },
      "UpdateStatusRequest": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          }
        }
      },
      "Diary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "threadId": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "mood": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "summary": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ChatThread": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "SseEmitter": {
        "type": "object",
        "properties": {
          "timeout": {
            "type": "integer",
            "format": "int64"
          }
        }
      }
    }
  }
}
