## 한밭대학교 모바일융합공학과 Aixary팀

### 팀 구성

* **지도교수**: 문지환 교수 
* **참여학생**
    * 20221017 박건상 
    * 20227002 이선혜 

---

### Project Background

#### 필요성

* 현대 사회에서 많은 사람들이 하루를 기록하고 싶어하지만, 꾸준히 일기를 작성하는 것을 어려워하는 한계가 존재합니다. 
* Aiary는 이러한 문제를 해결하기 위해 AI와 자연스럽게 대화하듯 하루를 기록하면, 그 내용을 바탕으로 자동으로 일기를 생성하는 대화형 일기 서비스입니다.

#### 기존 해결책의 문제점

* **일기 작성의 부담**: 기존의 일기 작성 방식은 사용자가 직접 내용을 구성하고 입력해야 하므로, 꾸준히 실천하기 위한 심리적 부담이 큽니다. 
* **복잡한 입력 과정**: 사용자가 직접 하루의 일을 회상하고 정리하여 입력하는 과정은 접근성과 편의성을 떨어트립니다. 

---

### System Design

Aiary는 실시간 대화 경험과 안정적인 데이터 처리를 위해 프론트엔드와 백엔드가 명확히 분리된 아키텍처를 가집니다.

* **Frontend (Client)**
    * **React 기반 UI**: 사용자가 친구와 대화하듯 자연스럽게 느낄 수 있는 채팅 UI를 React 기반인 React Native로 구축했습니다. 
    * **이벤트 기반 아키텍처**: 프론트엔드는 이벤트 기반 아키텍처 위에서 이벤트 스트림을 활용해 데이터 흐름(stream)을 관리합니다. 

* **Backend (Server)**
    * **Spring Boot**: 백엔드 서버는 Spring Boot 기반으로 구성되었습니다. 
    * **OpenAI API 연동**: 사용자의 대화 내용을 이해하고 일기를 생성하기 위해 OpenAI API와 연동됩니다. 
    * **SSE (Server-Sent Events)**: AI의 응답을 클라이언트에 실시간으로 스트리밍하기 위해 SSE 기술을 적용했습니다. 이는 사용자가 AI의 응답을 끊김 없이 받아볼 수 있게 하여 대화 경험을 향상시킵니다.
* **Database Schema (API 설계)**
    * 시스템은 `users`, `chat_thread`, `chat_message`, `diary` 4개의 핵심 테이블로 구성됩니다.
    * `chat_thread`는 하나의 대화 세션을, `chat_message`는 해당 세션에 속한 개별 메시지(User/AI)를 저장합니다.
    * `diary` 테이블은 `chat_thread`를 기반으로 생성된 최종 일기 데이터를 저장하며, `thread_id`로 원본 대화와 연결됩니다.
    

* **AI Prompt Engineering**
    * **실시간 대화 (`getStreamChatPrompt`)**: AI가 "공감 능력이 뛰어난 상담가" 역할을 하도록 설계되었습니다. 사용자의 이야기를 경청하고, 따뜻하게 공감하며, 부드러운 질문으로 대화를 유도합니다. 
    * **일기 생성 (`getDiaryGenerationPrompt`)**: AI가 "감정 분석 전문가이자 일기 작성 도우미" 역할을 수행합니다. 대화 내역을 분석하여 1인칭 독백 형태의 일기를 생성하고, 응답은 반드시 지정된 JSON 형식(`content`, `summary`)을 따라야 합니다. 

### System Requirements

* **대화형 일기 기록**: 사용자는 AI(Aiary)와 자연스러운 대화를 나누며 하루의 일상을 기록할 수 있어야 합니다. 
* **일기 자동 생성**: 대화가 완료되면, AI는 사용자의 대화 내용을 기반으로 일기를 자동으로 생성해야 합니다. 
* **감정 분석 및 시각화**: 생성된 일기에서 사용자의 감정 정보를 추출, 분석하고 이를 시각적으로 제공해야 합니다.
* **실시간 대화 경험**: AI의 응답은 SSE 기술을 통해 사용자에게 실시간으로 스트리밍되어 끊김 없는 대화 경험을 제공해야 합니다. 

---

### Case Study

#### Description (UI 및 사용 흐름)



1.  **채팅 및 기록** : 사용자는 Aiary와 자연스럽게 대화를 나눕니다. (예: "오늘은 새로운 프로젝트를 시작했어요.")
2.  **AI 공감 및 유도**: AI는 "공감 능력이 뛰어난 상담가" 프롬프트에 따라 사용자의 말에 공감하고 추가 질문을 합니다. (예: "새로운 시작이군요! ... 어떤 부분이 가장 기대되시나요?")
3.  **일기 자동 생성** : 대화가 완료되면, Aiary는 "일기 생성 프롬프트"에 따라 대화 내용을 1인칭 시점의 일기로 자동 생성합니다. 
4.  **감정 분석**: 생성된 일기에서는 감정 정보를 추출하여 시각적으로 분석하고, 사용자는 이를 통해 감정 변화를 확인할 수 있습니다. 

---

### Conclusion

* Aiary는 챗봇과의 간단한 대화만으로 손쉽게 일기를 작성할 수 있는 AI 기반 서비스입니다. 
* 복잡한 입력 과정 없이 자연스러운 대화만으로 하루를 기록할 수 있어, 일기 작성에 대한 부담을 줄이고 접근성을 높입니다. 
* AI를 활용한 자동 일기 생성 기능은 디지털 시대에 적합한 자기 성찰 도구로 활용될 수 있습니다. 
* 감정 분석 기능을 통해 사용자의 감정 변화를 파악하며, 향후 **정신건강 관리 및 감정 피드백 서비스**로 확장할 가능성을 지니고 있습니다. 

---

### Project Outcome

* **제14회 정보기술대학 작품전시회** (작품집 및 패널 제출)
* **작품명**: Aiary: AI 기반 자동 일기 생성 도구 
